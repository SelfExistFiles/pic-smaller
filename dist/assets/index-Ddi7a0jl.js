import{bj as v,bk as x,bl as y,bm as F,_ as P,R as c,aS as O,bn as j,r as b,C as E,bo as w,bp as M}from"./index-D09XYXI3.js";let a=null,i=e=>e(),g=[],d={};function h(){const{getContainer:e,duration:s,rtl:o,maxCount:n,top:t}=d,r=(e==null?void 0:e())||document.body;return{getContainer:()=>r,duration:s,rtl:o,maxCount:n,top:t}}const R=c.forwardRef((e,s)=>{const{messageConfig:o,sync:n}=e,{getPrefixCls:t}=b.useContext(E),r=d.prefixCls||t("message"),u=b.useContext(w),[f,C]=M(Object.assign(Object.assign(Object.assign({},o),{prefixCls:r}),u.message));return c.useImperativeHandle(s,()=>{const l=Object.assign({},f);return Object.keys(l).forEach(m=>{l[m]=function(){return n(),f[m].apply(f,arguments)}}),{instance:l,sync:n}}),C}),G=c.forwardRef((e,s)=>{const[o,n]=c.useState(h),t=()=>{n(h)};c.useEffect(t,[]);const r=j(),u=r.getRootPrefixCls(),f=r.getIconPrefixCls(),C=r.getTheme(),l=c.createElement(R,{ref:s,sync:t,messageConfig:o});return c.createElement(O,{prefixCls:u,iconPrefixCls:f,theme:C},r.holderRender?r.holderRender(l):l)});function p(){if(!a){const e=document.createDocumentFragment(),s={fragment:e};a=s,i(()=>{F(c.createElement(G,{ref:o=>{const{instance:n,sync:t}=o||{};Promise.resolve().then(()=>{!s.instance&&n&&(s.instance=n,s.sync=t,p())})}}),e)});return}a.instance&&(g.forEach(e=>{const{type:s,skipped:o}=e;if(!o)switch(s){case"open":{i(()=>{const n=a.instance.open(Object.assign(Object.assign({},d),e.config));n==null||n.then(e.resolve),e.setCloseFn(n)});break}case"destroy":i(()=>{a==null||a.instance.destroy(e.key)});break;default:i(()=>{var n;const t=(n=a.instance)[s].apply(n,P(e.args));t==null||t.then(e.resolve),e.setCloseFn(t)})}}),g=[])}function I(e){d=Object.assign(Object.assign({},d),e),i(()=>{var s;(s=a==null?void 0:a.sync)===null||s===void 0||s.call(a)})}function A(e){const s=v(o=>{let n;const t={type:"open",config:e,resolve:o,setCloseFn:r=>{n=r}};return g.push(t),()=>{n?i(()=>{n()}):t.skipped=!0}});return p(),s}function H(e,s){const o=v(n=>{let t;const r={type:e,args:s,resolve:n,setCloseFn:u=>{t=u}};return g.push(r),()=>{t?i(()=>{t()}):r.skipped=!0}});return p(),o}const S=e=>{g.push({type:"destroy",key:e}),p()},D=["success","info","warning","error","loading"],N={open:A,destroy:S,config:I,useMessage:x,_InternalPanelDoNotUseOrYouWillBeFired:y},W=N;D.forEach(e=>{W[e]=function(){for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return H(e,o)}});export{W as s};
